(function(c,a,d,e){var b={};b.init=function(){b.doCal();};b.doCal=function(){var f=new Calendar({element:d(".metrics-datepicker"),earliest_date:"January 1, 2006",latest_date:moment(),start_date:moment().subtract(29,"days"),end_date:moment(),callback:b.callback});
f.calendarSaveDates();};b.callback=function(){var i=moment(this.start_date).format("ll"),f=moment(this.end_date).format("ll");console.debug("Start Date: "+i+"\nEnd Date: "+f);
var h={action:"edd_metrics_change_date",start:i,end:f};var g="% over the last ";d.post(c.ajaxurl,h,b.postResponse);};b.postResponse=function(f){console.log(f);
var h=JSON.parse(f);console.log(h);var g="% over previous "+h.dates.num_days+" days";d("#revenue").text("$"+h.earnings.total);d("#revenue-compare span").text(h.earnings.compare.percentage+g).removeClass().addClass(h.earnings.compare.classes);
d("#sales").text(h.sales.count);d("#sales-compare span").text(h.sales.compare.percentage+g).removeClass().addClass(h.sales.compare.classes);d("#yearly").text("$"+h.earnings.avgyearly.total);
d("#avgyearly-compare span").text(h.earnings.avgyearly.compare.percentage+g).removeClass().addClass(h.earnings.avgyearly.compare.classes);d("#avgpercust").text("$"+h.earnings.avgpercust.total);
d("#avgpercust-compare span").text(h.earnings.avgpercust.compare.percentage+g).removeClass().addClass(h.earnings.avgpercust.compare.classes);d("#renewals").text(h.renewals.count);
d("#renewals-compare span").text(h.renewals.compare.percentage+g).removeClass().addClass(h.renewals.compare.classes);d("#refunds").text(h.refunds.count);
d("#refunds-compare span").text(h.refunds.compare.percentage+g).removeClass().addClass(h.refunds.compare.classes);};jQuery(a).ready(b.init);})(window,document,jQuery);
